unit Files.Download;

interface

Uses System.SysUtils,
  System.Classes,
  StrUtils,
  Banco.Classe,
  Vcl.ExtCtrls,
  IdBaseComponent,
  IdComponent,
  IdCustomHTTPServer,
  IdContext;

type
  TControleDownload = Class
  Public
    function Download(FileDir: String; ARequestInfo: TIdHTTPRequestInfo): TFileStream;
  End;

implementation

uses
  System.JSON;


function TControleDownload.Download(FileDir: String; ARequestInfo: TIdHTTPRequestInfo): TFileStream;
var
  lPathFile, FileName,LocalFileName: String;
 // lMemoryStream: TMemoryStream;
begin
    lPathFile := IncludeTrailingPathDelimiter(ExtractFilePath(ParamStr(0)));
    lPathFile := lPathFile + IncludeTrailingPathDelimiter(Trim(FileDir));



    Try
        Result:=TFileStream.Create(ExtractFilePath(ParamStr(0)) + 'files\Simple.pdf', fmOpenRead and fmShareDenyWrite);

        raise Exception.Create('Erro na recepção do arquivo tente novamente');

    Finally



    End;


end;

end.
